# Barnes–Hut N-Body (Kotlin Multiplatform)

![collide](collide.gif)

Проект перенесён на Kotlin Multiplatform в духе канона DAML: вся физика Барнса–Хатта живёт в общем модуле `shared`, а визуализация реализована на Jetpack Compose для Android.

## Модули

- `shared` — multiplatform-библиотека с алгоритмом Барнса–Хатта, генераторами дисков и снапшотами тел.
- `androidApp` — Android-приложение на Compose, использующее `shared` для расчётов и рисующее тела на канвасе.

## Как запустить на Android

1. Установите Android Studio Hedgehog или новее с Android SDK 34 и JDK 17.
2. Откройте проект в Android Studio.
3. Выберите конфигурацию `androidApp` и запустите приложение на устройстве/эмуляторе.
   Либо используйте Gradle Wrapper:
   ```bash
   ./gradlew :androidApp:installDebug
   ```

## Логика симуляции

- Квадродерево `BHTree` с критерием θ соответствует описанию из статьи DAML.
- Смягчение силы (`ε = 1.0`) и параметры диска совпадают с исходным вариантом.
- Общий шаг интегрирования — простой kick-drift со стабилизацией границ в пределах экрана.

## Кастомизация

- Настройки находятся в `SimulationConfig` (ширина/высота, θ, `Δt`, масса центра, число генерируемых тел).
- Для модификации стартовых условий используйте фабрику `BodyFactory` (`makeKeplerDisk`, `makeGalaxyDisk`).

## Лицензия

Используйте и модифицируйте свободно; упоминание источника приветствуется.
